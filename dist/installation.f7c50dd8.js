var e=require("fs-extra").pathExists,r=require("path"),t=r.join,i=r.dirname,a=require("child_process").execFile,o=require("util").promisify,s=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire4554;s.register("5jKoN",((r,n)=>{function c(r){return e(r)}async function d(e){try{var r;return null===(r=(await f(e,["--version"])).stderr.match(/v(\d\S*)\s/))||void 0===r?void 0:r[1]}catch(e){return void console.error(e)}}async function l(){const r=t(i(__dirname),"dist"),a="serve-d"+("win32"===process.platform?".exe":""),o=t(r,`${process.platform}-${process.arch}`),n=await(async()=>{const r=process.env.HOME;if("string"==typeof r&&""!==r&&"linux"===process.platform)return await e(t(r,".local","share"))?t(r,".local","share","code-d","bin"):t(r,".code-d","bin");if("win32"===process.platform){const e=process.env.APPDATA;if("string"==typeof e&&""!==e)return t(e,"code-d","bin")}else if("string"==typeof r&&""!==r)return t(r,".code-d","bin");return""})(),l=t(n,a);if(o){const e=t(o,a);await c(l)&&await(async(e,r)=>{const t=await s("3ByGv"),[i,a]=await Promise.all([d(e),d(r)]);return"string"==typeof i&&"string"==typeof a&&""!==i&&""!==a&&-1!==t(i,a)})(l,e)||await(async(e,r)=>{const{copy:t}=await $cba7abbdfc042951cbd6213878ea3ff4$importAsync$5f67160147d256a6;atom.notifications.addInfo("Installing/Updating D servers..."),await t(e,r,{overwrite:!0}),atom.notifications.addSuccess("D servers was installed/updated")})(o,n)}else await c(l)||atom.notifications.addError(`serve-d binary is not available for ${process.platform}.\n        Please built it from the source, place it under ${n}, and restart Atom.`);return l}Object.defineProperty(r.exports,"installServeD",{get:()=>l,set:void 0,enumerable:!0,configurable:!0});const f=o(a)})),s.register("3ByGv",((e,r)=>{e.exports=Promise.resolve(require("./compare.2ebd832c.js")).then((()=>s("5PzzV")))}));
//# sourceMappingURL=installation.f7c50dd8.js.map
